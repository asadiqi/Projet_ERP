<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- =====================================================
         ACTION : Rental Invoices
         Menu qui affiche UNIQUEMENT les factures de location
         ===================================================== -->
    <record id="action_rental_invoices" model="ir.actions.act_window">
        <field name="name">Rental Invoices</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('is_rental_invoice','=',True)]</field>
    </record>

    <!-- =====================================================
         LIST VIEW : Rental Invoices
         ===================================================== -->
    <record id="view_rental_invoice_list" model="ir.ui.view">
        <field name="name">rental.invoice.list</field>
        <field name="model">account.move</field>
        <field name="arch" type="xml">
            <list string="Rental Invoices">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="invoice_date"/>
                <field name="state"/>
                <field name="amount_total"/>
            </list>
        </field>
    </record>

    <!-- =====================================================
         FORM VIEW : Boutons Late / Damage
         → visibles UNIQUEMENT sur les factures rental
         ===================================================== -->
    <record id="view_rental_invoice_form_inherit_buttons" model="ir.ui.view">
        <field name="name">rental.invoice.form.inherit.buttons</field>
        <field name="model">account.move</field>

        <!-- On hérite de la vue standard des factures -->
        <field name="inherit_id" ref="account.view_move_form"/>

        <field name="arch" type="xml">

            <!-- Injection dans le header -->
            <header position="inside">

                <!-- Bouton FRAIS DE RETARD -->
                <button name="add_late_fee"
                        type="object"
                        string="Add Late Return Fee"
                        class="btn-warning"
                        invisible="not is_rental_invoice"/>

                <!-- Bouton FRAIS DE DOMMAGES -->
                <button name="add_damage_fee"
                        type="object"
                        string="Add Damage Repair Fee"
                        class="btn-danger"
                        invisible="not is_rental_invoice"/>

            </header>

        </field>
    </record>

</odoo>
